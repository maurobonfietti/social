<div class="col-lg-10">
    <h3>
        {{title}}
    </h3>
    <div class="people" *ngIf="messages">
        <div class="item-user" *ngFor="let message of messages">
            <div class="panel panel-default" *ngIf="message.emitter && message.emitter._id != identity._id">
                <div class="panel-body">
                    <div class="image-user pull-left">
                        <a [routerLink]="['/perfil', message.emitter._id]">
                            <img src="{{url + 'get-image-user/' + message.emitter.image}}" *ngIf="message.emitter.image" />
                            <img src="assets/user.png" *ngIf="!message.emitter.image" />
                        </a>
                    </div>
                    <div class="username pull-left">
                        <p class="name-surname">
                            <a [routerLink]="['/perfil', message.emitter._id]">
                                {{message.emitter.name + ' ' + message.emitter.surname}}
                            </a>
                            &nbsp;|&nbsp;
                            <span class="nickname">
                                {{message.emitter.nick}}
                            </span>
                            &nbsp;|&nbsp;
                            <span class="date nickname">
                                {{ (message.created_at | amFromUnix) | amLocale: 'es' | amTimeAgo }}
                            </span>
                        </p>
                        <p>
                            {{message.text}}
                        </p>
                    </div>
                </div>
            </div>
            <div class="panel panel-default" *ngIf="message.emitter && message.emitter._id == identity._id">
                <div class="panel-body">
                    <div class="image-user pull-left">
                        <a [routerLink]="['/perfil', message.emitter._id]">
                            <img src="{{url + 'get-image-user/' + message.emitter.image}}" *ngIf="message.emitter.image" />
                            <img src="assets/user.png" *ngIf="!message.emitter.image" />
                        </a>
                    </div>
                    <div class="username pull-left">
                        <p class="name-surname">
                            <a [routerLink]="['/perfil', message.emitter._id]">
                                {{message.emitter.name + ' ' + message.emitter.surname}}
                            </a>
                            &nbsp;|&nbsp;
                            <span class="nickname">
                                {{message.emitter.nick}}
                            </span>
                            &nbsp;|&nbsp;
                            <span class="date nickname">
                                {{ (message.created_at | amFromUnix) | amLocale: 'es' | amTimeAgo }}
                            </span>
                        </p>
                        <p>
                            {{message.text}}
                        </p>
                    </div>
                </div>
            </div>
        </div>
<!--        <div class="alert alert-success" *ngIf="status == 'success'">
            Mensaje Enviado!
            Ver en <a [routerLink]="['/mensajes/enviados']">mensajes enviados</a>
        </div>
        <div class="alert alert-danger" *ngIf="status == 'error'">
            Error al enviar mensaje.
        </div>
        <form #formAdd="ngForm" (ngSubmit)="onSubmit(formAdd)">
            <p>
                <label>Para:</label>
                <select *ngIf="follows" name="receiver" #receiver="ngModel" [(ngModel)]="message.receiver" class="form-control" required>
                    <option *ngFor="let follow of follows" value="{{follow.user._id}}">
                        {{follow.user.name + ' ' + follow.user.surname + ' ('+ follow.user.nick + ')' }}
                    </option>
                </select>
            </p>
            <p>
                <label>Mensaje:</label>
                <textarea name="text" #text="ngModel" [(ngModel)]="message.text" class="form-control" required></textarea>
                <span *ngIf="!text.valid && text.touched">El mensaje es obligatorio</span>
            </p>
            <input type="submit" value="{{title}}" class="btn btn-success" />
        </form>-->
        <ul class="pagination pull-right">
            <li *ngIf="page > 1 && total > 0"><a [routerLink]="['/mensajes/conversation', prev_page]">Anterior</a></li>
            <li *ngIf="pages != page && total > 0"><a [routerLink]="['/mensajes/conversation', next_page]">Siguiente</a></li>
        </ul>
    </div>
</div>
